<section>

    <main class="main">
        <div class="login-page bg-image pt-8 pb-8 pt-md-12 pb-md-12 pt-lg-17 pb-lg-17"
            style="background-image: url('/images/backgrounds/c2.jpg')">
            <div class="container">
                <div class="form-box">
                    <div class="form-tab">


                        <ul class="nav nav-pills nav-fill" role="tablist">
                            <li class="nav-item">
                                <a class="nav-link active" id="register-tab-2" data-toggle="tab" href="#register-2"
                                    role="tab" aria-controls="register-2" aria-selected="true">SIGN IN</a>
                            </li>
                        </ul>


                        <div class="tab-content">
                            <div class="tab-pane fade show active" id="register-2" role="tabpanel"
                                aria-labelledby="register-tab-2">


                                <form action="" method="">
                                    <div class="row">

                                        <div class="form-group col-md-12">
                                            <p class="text-danger" id="err"></p>
                                            <label for="register-email-2">Email Address </label>
                                            <input id="email" type="email" class="form-control" 
                                                name="email" required>
                                        </div><!-- End .form-group -->

                                        <div class="form-group col-md-12">
                                            <p class="text-danger" id="err"></p>
                                            <label for="register-password-2">Password </label>
                                            <input id="password" type="password" class="form-control"
                                                name="password" required>
                                        </div><!-- End .form-group -->





                                        <div class="form-footer mx-auto mt-2">
                                            <button onclick="validate()" type="button"
                                                class="btn btn-outline-primary-2 col-md-12">
                                                <span>SIGN IN</span>
                                                <i class="icon-long-arrow-right"></i>
                                            </button>

                                            <div class=" mt-3 mx-auto">
                                                <label class=" text-center" for="register-policy-2"><a
                                                        href="signUp">Don't have an account ?</a> </label>
                                            </div><!-- End .custom-checkbox -->
                                        </div><!-- End .form-footer -->
                                    </div>
                                </form>

                                <div class="form-choice">
                                    <p class="text-center">or sign up with</p>
                                    <div class="row">
                                        <div class="col-sm-12">
                                            <a href="/otp" class="btn btn-login btn-g">
                                                <i class="icon-phone"></i>
                                                Login With Phone number
                                            </a>
                                        </div><!-- End .col-6 -->
                                    </div><!-- End .row -->
                                </div><!-- End .form-choice -->

                            </div><!-- .End .tab-pane -->
                        </div><!-- End .tab-content -->
                    </div><!-- End .form-tab -->
                </div><!-- End .form-box -->
            </div><!-- End .container -->
        </div><!-- End .login-page section-bg -->
    </main><!-- End .main -->
</section>

<script>
    function validate() {
        const email = document.getElementById('email')
        const emailValue = email.value?.trim()
        const err1 = email.parentElement.querySelector("P")
        const password = document.getElementById('password')
        const passwordValue = password.value?.trim()
        const err2 = password.parentElement.querySelector("p")

        let flag = 1
        if (emailValue == "") {
            err1.innerText = "the field is required"
            flag = 2
        } else if (!emailValue.match(
            /^(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/
        )) {
            err1.innerText = 'Enter a valid email'
            flag = 2
        }
        if (password.value == "") {
            err2.innerText = 'this field is required'
        }
        
      if(flag==1){
        submit(emailValue,passwordValue)
      }
      function submit(emailValue,passwordValue){
        console.log(emailValue);
        fetch(`/userLogin`,{
            method:"post",
            headers:{
                'Content-Type':'application/json'
            },
          body:JSON.stringify({
                  email:emailValue,
                  password:passwordValue,
          })
        }).then((res)=>res.json())
           .then((res)=>{
            if(res.value=='success' ){
                window.location.href='/'
            }else{
                alert('err')
               
            }
           })

       
      }
    }

</script>